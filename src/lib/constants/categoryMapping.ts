/**
 * 상품 카테고리 통합 매핑
 *
 * 기존의 세분화된 카테고리들을 CU 앱의 표준 카테고리로 통합합니다.
 * DB가 아닌 코드 레벨에서 관리되며, 상품 조회 시 런타임에 매핑됩니다.
 */

// CU 앱 표준 카테고리
export const UNIFIED_CATEGORIES = [
  "전체",
  "+1 행사상품",
  "건강기능식품",
  "맥주",
  "소주/양주/전통주",
  "와인/기타주류",
  "도시락",
  "김밥/주먹밥",
  "샌드위치/햄버거",
  "빵/떡",
  "디저트",
  "샐러드/조리면",
  "반찬/조미료/차",
  "과일/식재료",
  "냉장/냉동간편식",
  "아이스크림",
  "유제품",
  "과일음료",
  "생수/차음료/ICE",
  "탄산/커피/숙취해소음료",
  "스낵/시리얼",
  "비스켓/쿠키",
  "캔디/젤리/껌",
  "초콜릿",
  "라면/면",
  "안주",
  "취미/완구",
  "생활잡화",
  "위생/미용용품",
  "의약/건강",
  "반려용품",
  "교통카드",
  "기타", // 모든 카테고리가 미매핑인 상품
] as const;

export type UnifiedCategory = (typeof UNIFIED_CATEGORIES)[number];

/**
 * 기존 카테고리 → 통합 카테고리 매핑
 *
 * 키: 기존 원본 카테고리명
 * 값: 통합 카테고리명
 */
export const CATEGORY_MAPPING: Record<string, UnifiedCategory> = {
  // +1 행사상품 (기능적으로 구현 예정)

  // 건강기능식품
  건강기능: "건강기능식품",
  건강기능식품: "건강기능식품",
  건강기능음료: "건강기능식품",
  건강식품: "건강기능식품",
  건강음료: "건강기능식품",
  건강지향식품: "건강기능식품",
  기능건강음료: "건강기능식품",
  비타민음료: "건강기능식품",

  // 맥주
  국산맥주: "맥주",

  // 소주/양주/전통주
  // '주류': '소주/양주/전통주',

  // 와인/기타주류 (현재 데이터에 없음)

  // 도시락
  도시락: "도시락",
  정식도시락: "도시락",

  // 김밥/주먹밥
  김밥: "김밥/주먹밥",
  용기김밥: "김밥/주먹밥",
  줄김밥: "김밥/주먹밥",
  삼각김밥: "김밥/주먹밥",
  주먹밥: "김밥/주먹밥",
  기타주먹밥: "김밥/주먹밥",

  // 샌드위치/햄버거
  샌드위치: "샌드위치/햄버거",
  햄버거: "샌드위치/햄버거",
  핫도그: "샌드위치/햄버거",

  // 빵/떡
  빵: "빵/떡",
  "빵/떡/디저트": "빵/떡",
  NB빵: "빵/떡",
  베이커리: "빵/떡",
  냉장베이커리: "빵/떡",
  냉장베이커리간편식: "빵/떡",
  즉석베이커리: "빵/떡",
  즉석빵: "빵/떡",
  조리빵: "빵/떡",
  전용빵: "빵/떡",
  찐빵류: "빵/떡",
  떡: "빵/떡",
  도너츠: "빵/떡",

  // 디저트
  디저트: "디저트",
  냉동디저트: "디저트",
  냉장디저트: "디저트",
  빙수: "디저트",
  푸딩: "디저트",
  냉장젤리: "디저트",

  // 샐러드/조리면
  샐러드: "샐러드/조리면",
  조리면: "샐러드/조리면",

  // 반찬/조미료/차
  메인반찬: "반찬/조미료/차",
  반찬류: "반찬/조미료/차",
  밑반찬: "반찬/조미료/차",
  김치: "반찬/조미료/차",
  김치류: "반찬/조미료/차",
  단품요리: "반찬/조미료/차",
  조미료: "반찬/조미료/차",
  조미료류: "반찬/조미료/차",
  조미소스: "반찬/조미료/차",
  소스류: "반찬/조미료/차",
  장류: "반찬/조미료/차",
  차류: "반찬/조미료/차",

  // 과일/식재료
  과일: "과일/식재료",
  채소: "과일/식재료",
  야채: "과일/식재료",
  식재: "과일/식재료",
  식재료: "과일/식재료",
  농산식재료: "과일/식재료",
  양곡: "과일/식재료",
  정육: "과일/식재료",
  "정육)": "과일/식재료",
  "1차축산물(생란": "과일/식재료",
  "1차 냉동제품": "과일/식재료",
  축산물: "과일/식재료",
  수산물: "과일/식재료",
  어묵: "과일/식재료",
  가루류: "과일/식재료",
  식용유: "과일/식재료",
  계란: "과일/식재료",
  달걀: "과일/식재료",
  생란: "과일/식재료",
  김: "과일/식재료",
  두부: "과일/식재료",
  유부: "과일/식재료",

  // 냉장/냉동간편식
  간편식: "냉장/냉동간편식",
  // 간편식사: "냉장/냉동간편식",
  가공식: "냉장/냉동간편식",
  // 가공식사: "냉장/냉동간편식",
  가공식사제품: "냉장/냉동간편식",
  가공식품: "냉장/냉동간편식",
  냉장간편식: "냉장/냉동간편식",
  냉동간편식: "냉장/냉동간편식",
  냉동식품: "냉장/냉동간편식",
  냉동제품: "냉장/냉동간편식",
  냉동즉석식: "냉장/냉동간편식",
  즉석식: "냉장/냉동간편식",
  즉석싯: "냉장/냉동간편식",
  즉석요리: "냉장/냉동간편식",
  즉석요리류: "냉장/냉동간편식",
  즉석조리: "냉장/냉동간편식",
  밀키트: "냉장/냉동간편식",
  냉장밀키트: "냉장/냉동간편식",
  식사대용: "냉장/냉동간편식",
  식사대용식: "냉장/냉동간편식",
  기타식사대용식: "냉장/냉동간편식",
  기타대용식: "냉장/냉동간편식",
  대용식: "냉장/냉동간편식",
  국: "냉장/냉동간편식",
  국류: "냉장/냉동간편식",
  국밥류: "냉장/냉동간편식",
  국탕찌개: "냉장/냉동간편식",
  냉장국탕찌개: "냉장/냉동간편식",
  탕: "냉장/냉동간편식",
  탕류: "냉장/냉동간편식",
  찌개: "냉장/냉동간편식",
  찌개류: "냉장/냉동간편식",
  죽: "냉장/냉동간편식",
  죽류: "냉장/냉동간편식",
  스프류: "냉장/냉동간편식",
  수프류: "냉장/냉동간편식",
  즉석밥: "냉장/냉동간편식",
  즉석밥류: "냉장/냉동간편식",
  냉장밥: "냉장/냉동간편식",
  냉동밥: "냉장/냉동간편식",
  냉장분식류: "냉장/냉동간편식",
  분식류: "냉장/냉동간편식",
  튀김: "냉장/냉동간편식",
  튀김류: "냉장/냉동간편식",
  오뎅: "냉장/냉동간편식",
  즉석오뎅: "냉장/냉동간편식",
  즉석피자: "냉장/냉동간편식",
  피자: "냉장/냉동간편식",
  치킨: "냉장/냉동간편식",
  냉동만두: "냉장/냉동간편식",
  통조림: "냉장/냉동간편식",
  즉: "냉장/냉동간편식",
  가공란: "냉장/냉동간편식",
  반숙란: "냉장/냉동간편식",
  덮밥: "냉장/냉동간편식",
  덮밥류: "냉장/냉동간편식",
  덮밥비빔밥: "냉장/냉동간편식",

  // 아이스크림
  아이스크림: "아이스크림",
  아이스크: "아이스크림",
  아이스크림케익: "아이스크림",
  프리미엄아이스크림: "아이스크림",
  아이스바: "아이스크림",
  콘모나카: "아이스크림",

  // 유제품
  유제품: "유제품",
  유가공류: "유제품",
  유가공품류: "유제품",
  "치즈 및 유가공품류": "유제품",
  우유: "유제품",
  흰우유: "유제품",
  "우유. 가공유": "유제품",
  가공유: "유제품",
  두유: "유제품",
  발효유: "유제품",
  요구르트: "유제품",
  요거트: "유제품",
  호상요구르트: "유제품",
  치즈: "유제품",
  치즈류: "유제품",

  // 과일음료
  과일야채음료: "과일음료",
  과즙음료: "과일음료",
  "과즙음료. 음료": "과일음료",
  냉장주스: "과일음료",

  // 생수/차음료/ICE
  생수: "생수/차음료/ICE",
  차음료: "생수/차음료/ICE",
  국산생수: "생수/차음료/ICE",
  수입생수: "생수/차음료/ICE",
  얼음: "생수/차음료/ICE",
  일반얼음: "생수/차음료/ICE",
  컵얼음: "생수/차음료/ICE",
  아이스컵: "생수/차음료/ICE",
  얼음컵: "생수/차음료/ICE",
  아이스드링크: "생수/차음료/ICE",

  // 탄산/커피/숙취해소음료
  // 음료: "탄산/커피/숙취해소음료",
  음료원액: "탄산/커피/숙취해소음료",
  제조음료: "탄산/커피/숙취해소음료",
  탄산음료: "탄산/커피/숙취해소음료",
  일반탄산음료: "탄산/커피/숙취해소음료",
  탄산수: "탄산/커피/숙취해소음료",
  스포츠음료: "탄산/커피/숙취해소음료",
  "스포츠/이온음료": "탄산/커피/숙취해소음료",
  이온음료: "탄산/커피/숙취해소음료",
  에너지음료: "탄산/커피/숙취해소음료",
  커피: "탄산/커피/숙취해소음료",
  커피류: "탄산/커피/숙취해소음료",
  커피음료: "탄산/커피/숙취해소음료",
  "커피 음료": "탄산/커피/숙취해소음료",
  "커피(자동)": "탄산/커피/숙취해소음료",
  캔커피: "탄산/커피/숙취해소음료",
  "캔/병커피": "탄산/커피/숙취해소음료",
  병커피: "탄산/커피/숙취해소음료",
  컵커피: "탄산/커피/숙취해소음료",
  냉장커피: "탄산/커피/숙취해소음료",
  온장커피: "탄산/커피/숙취해소음료",
  즉석커피: "탄산/커피/숙취해소음료",
  즉석원두커피: "탄산/커피/숙취해소음료",
  분말커피: "탄산/커피/숙취해소음료",
  분말커피류: "탄산/커피/숙취해소음료",
  커피원액: "탄산/커피/숙취해소음료",
  커피차: "탄산/커피/숙취해소음료",
  커피차류: "탄산/커피/숙취해소음료",
  밀크티: "탄산/커피/숙취해소음료",
  GET: "탄산/커피/숙취해소음료",
  GET커피: "탄산/커피/숙취해소음료",
  디카페인: "탄산/커피/숙취해소음료",
  숙취해소: "탄산/커피/숙취해소음료",
  숙취해소음료: "탄산/커피/숙취해소음료",
  숙취해소제: "탄산/커피/숙취해소음료",
  "씨즈)핫초코원컵": "탄산/커피/숙취해소음료",

  // 스낵/시리얼
  스낵: "스낵/시리얼",
  스낵류: "스낵/시리얼",
  일반스낵: "스낵/시리얼",
  전용스낵: "스낵/시리얼",
  번들스낵: "스낵/시리얼",
  라면스낵: "스낵/시리얼",
  "=스낵": "스낵/시리얼",
  감자스낵: "스낵/시리얼",
  과자: "스낵/시리얼",
  과자류: "스낵/시리얼",
  시리얼: "스낵/시리얼",
  시리얼류: "스낵/시리얼",
  시리얼바: "스낵/시리얼",
  에너지바: "스낵/시리얼",
  파이: "스낵/시리얼",
  파이류: "스낵/시리얼",

  // 비스켓/쿠키
  비스켓: "비스켓/쿠키",
  쿠키: "비스켓/쿠키",
  약과: "비스켓/쿠키",

  // 캔디/젤리/껌
  캔디: "캔디/젤리/껌",
  캔디류: "캔디/젤리/껌",
  하드캔디: "캔디/젤리/껌",
  소프트캔디: "캔디/젤리/껌",
  기능성캔디: "캔디/젤리/껌",
  츄잉캔디: "캔디/젤리/껌",
  토이캔디: "캔디/젤리/껌",
  젤리: "캔디/젤리/껌",
  젤리류: "캔디/젤리/껌",
  소프트젤리: "캔디/젤리/껌",
  껌: "캔디/젤리/껌",
  일반껌: "캔디/젤리/껌",
  용기껌: "캔디/젤리/껌",
  리필껌: "캔디/젤리/껌",
  양갱: "캔디/젤리/껌",

  // 초콜릿
  초콜릿: "초콜릿",
  초콜렛: "초콜릿",
  초코바: "초콜릿",
  코팅초콜릿: "초콜릿",
  코팅너겟초콜릿: "초콜릿",
  판초콜릿: "초콜릿",
  바초콜릿: "초콜릿",
  카라멜: "초콜릿",

  // 라면/면
  라면: "라면/면",
  면: "라면/면",
  면류: "라면/면",
  // 건면: "라면/면",
  봉지면: "라면/면",
  용기면: "라면/면",
  // 컵: "라면/면",
  // 원컵: "라면/면",
  // 원컵류: "라면/면",
  냉동면: "라면/면",
  냉장면: "라면/면",
  기타면류: "라면/면",

  // 안주
  안주: "안주",
  안주류: "안주",
  마른안주: "안주",
  마른안주류: "안주",
  냉장안주: "안주",
  농산안주: "안주",
  수산안주: "안주",
  수산안주류: "안주",
  축산안주: "안주",
  육가공: "안주",
  육가공류: "안주",
  육포: "안주",
  햄: "안주",
  햄소시지: "안주",
  소시지: "안주",
  핫바: "안주",
  핫바류: "안주",
  맛살: "안주",

  // 취미/완구
  완구: "취미/완구",
  완구류: "취미/완구",
  일반완구: "취미/완구",
  행사완구: "취미/완구",
  게임완구: "취미/완구",
  취미: "취미/완구",
  "취미/레저": "취미/완구",
  레저: "취미/완구",
  레져: "취미/완구",
  스포츠: "취미/완구",
  파티: "취미/완구",
  파티용품: "취미/완구",
  꽃: "취미/완구",
  트럼프: "취미/완구",
  화투: "취미/완구",
  풍선: "취미/완구",

  // 생활잡화
  // 생활용품: "생활잡화",
  생활잡화: "생활잡화",
  신변잡화: "생활잡화",
  // 신변잡화장: "생활잡화",
  가정용품: "생활잡화",
  홈: "생활잡화",
  "홈/주방용품": "생활잡화",
  홈주방용품: "생활잡화",
  주방용품: "생활잡화",
  주방세제: "생활잡화",
  홈주방세제: "생활잡화",
  청소용품: "생활잡화",
  세제: "생활잡화",
  세탁세제: "생활잡화",
  세탁용품: "생활잡화",
  세정제: "생활잡화",
  제습제: "생활잡화",
  방충제: "생활잡화",
  방향제: "생활잡화",
  탈취제: "생활잡화",
  화장지: "생활잡화",
  티슈: "생활잡화",
  휴지: "생활잡화",
  물티슈: "생활잡화",
  일회용품: "생활잡화",
  용기: "생활잡화",
  쇼핑백: "생활잡화",
  문구: "생활잡화",
  문구류: "생활잡화",
  문구용품: "생활잡화",
  필기구류: "생활잡화",
  팬시용품: "생활잡화",
  사무용품: "생활잡화",
  컴퓨터용품: "생활잡화",
  전기소품: "생활잡화",
  전기연료: "생활잡화",
  연료: "생활잡화",
  건전지: "생활잡화",
  배터리: "생활잡화",
  보조배터리: "생활잡화",
  충전기: "생활잡화",
  충전기기: "생활잡화",
  충전아답타: "생활잡화",
  충전용품: "생활잡화",
  이어폰: "생활잡화",
  핸드폰용품: "생활잡화",
  휴대폰용품: "생활잡화",
  소형가전: "생활잡화",
  가전제품: "생활잡화",
  "샤오미)USB선풍기(블루)": "생활잡화",
  "샤오미)USB선풍기(화이트)": "생활잡화",
  차량용품: "생활잡화",
  차량용품특화: "생활잡화",
  여행용세트: "생활잡화",
  여행용품: "생활잡화",
  시즌용품: "생활잡화",
  우천용상품: "생활잡화",
  우천용품: "생활잡화",
  우산: "생활잡화",
  일반우산: "생활잡화",
  일회용우산: "생활잡화",
  우의: "생활잡화",
  핫팩: "생활잡화",
  해변특화: "생활잡화",
  멀티타입: "생활잡화",
  튜브: "생활잡화",
  유심: "생활잡화",
  풀: "생활잡화",

  // 위생/미용용품
  위생용품: "위생/미용용품",
  위생장갑: "위생/미용용품",
  기타위생용품: "위생/미용용품",
  생리대: "위생/미용용품",
  생리용품: "위생/미용용품",
  여성용품: "위생/미용용품",
  마스크: "위생/미용용품",
  기저귀: "위생/미용용품",
  콘돔: "위생/미용용품",
  의류용품: "위생/미용용품",
  패션의류: "위생/미용용품",
  내의류: "위생/미용용품",
  속옷: "위생/미용용품",
  양말: "위생/미용용품",
  스타킹: "위생/미용용품",
  "비비안)압박스타킹검정": "위생/미용용품",
  "페넬)누드팬티스타킹살구": "위생/미용용품",
  "트라이)밴드스타킹살구": "위생/미용용품",
  "페넬)앵클삭스살구": "위생/미용용품",
  악세사리: "위생/미용용품",
  액세서리: "위생/미용용품",
  미용용품: "위생/미용용품",
  미용소품: "위생/미용용품",
  화장품: "위생/미용용품",
  기초화장품: "위생/미용용품",
  클렌징용품: "위생/미용용품",
  세안용품: "위생/미용용품",
  목욕용품: "위생/미용용품",
  목욕세면: "위생/미용용품",
  세면용품: "위생/미용용품",
  샴푸: "위생/미용용품",
  샴푸린스: "위생/미용용품",
  바디워시: "위생/미용용품",
  비누: "위생/미용용품",
  핸드워시: "위생/미용용품",
  구강용품: "위생/미용용품",
  구경용품: "위생/미용용품",
  칫솔: "위생/미용용품",
  헤어제품: "위생/미용용품",
  헤어스타일링: "위생/미용용품",
  헤어에센스: "위생/미용용품",
  면도용품: "위생/미용용품",
  립케어: "위생/미용용품",
  렌즈세정: "위생/미용용품",
  렌즈세정액: "위생/미용용품",
  밴드: "위생/미용용품",

  // 의약/건강
  의약건강기능: "의약/건강",
  의약외품: "의약/건강",
  의약외품부품: "의약/건강",
  의약외품음료: "의약/건강",
  안전상비의약품: "의약/건강",
  안전상품의약품: "의약/건강",
  안정상비의약품: "의약/건강",
  상비약: "의약/건강",
  임신테스트기: "의약/건강",

  // 반려용품
  반려동물: "반려용품",
  반려동물용품: "반려용품",
  반려동물간식: "반려용품",
  반려용품: "반려용품",
  애완용품: "반려용품",
  애견: "반려용품",
  애견용품: "반려용품",
  애견간식: "반려용품",
  사료: "반려용품",
  고양이사료: "반려용품",
  배변봉투: "반려용품",

  // 교통카드
  교통카드: "교통카드",
  통합교통카드: "교통카드",
  티머니: "교통카드",
  카드: "교통카드",

  // 기타 (상품권, 선물세트 등 - 생활잡화로 분류)
  상품권: "생활잡화",
  유가증권: "생활잡화",
  선물세트: "생활잡화",
  음료선물세트: "생활잡화",
  편의상품: "생활잡화",
  // 식품: "생활잡화",

  // 특정 브랜드/제품명 (적절한 카테고리로 매핑)
  "CJ)고메토마토미트볼": "냉장/냉동간편식",
  // HEYROO: "생활잡화",
  // PBICK: "생활잡화",
  // 델라페: "생활잡화",
  "동서)오션스프레루비레드": "과일음료",
  "동서)오션스프레크랜베리": "과일음료",
  라이타: "생활잡화",
  맛남의광장: "냉장/냉동간편식",
  바: "아이스크림",
};

/**
 * 원본 카테고리를 통합 카테고리로 변환
 */
export function getUnifiedCategory(originalCategory: string): UnifiedCategory {
  // 빈 문자열이나 '전체'는 '전체'로 반환
  if (!originalCategory || originalCategory === "전체") {
    return "전체";
  }

  // 매핑 테이블에서 찾기
  const unified = CATEGORY_MAPPING[originalCategory];

  if (unified) {
    return unified;
  }

  // 매핑되지 않은 카테고리는 콘솔에 경고 출력
  console.warn(`[카테고리 매핑] 미매핑 카테고리 발견: "${originalCategory}"`);

  // 기본값으로 '생활잡화' 반환
  return "생활잡화";
}

/**
 * 여러 원본 카테고리를 통합 카테고리로 변환하고 중복 제거
 */
export function getUnifiedCategories(
  originalCategories: string[]
): UnifiedCategory[] {
  const unifiedSet = new Set<UnifiedCategory>();

  for (const category of originalCategories) {
    const unified = getUnifiedCategory(category);
    unifiedSet.add(unified);
  }

  return Array.from(unifiedSet);
}

/**
 * 모든 원본 카테고리를 조회하여 미매핑 카테고리를 찾음
 */
export function findUnmappedCategories(allCategories: string[]): string[] {
  const unmapped: string[] = [];

  for (const category of allCategories) {
    // '전체'는 제외
    if (category === "전체" || !category) {
      continue;
    }

    // 매핑되지 않은 카테고리 찾기
    if (!CATEGORY_MAPPING[category]) {
      unmapped.push(category);
    }
  }

  return unmapped;
}
